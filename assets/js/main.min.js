(function ($) {

    var $window = $(window);
    $window.on('scroll', function () {
        var scroll = $window.scrollTop();
        if (scroll < 300) {
            $(".sticker").removeClass("sticky");
        } else {
            $(".sticker").addClass("sticky");
        }
    });

    $('#mobile-menu').each(function () {
        var $this = $(this);
        var $screenWidth = $this.attr('data-screen') ? parseInt($this.attr('data-screen'), 10) : 991;
        $this.meanmenu({
            meanMenuContainer: '.mobile-menu',
            meanScreenWidth: $screenWidth,
            meanRevealPosition: 'right'
        });
    });

    // Categories Item Show Hide

    $(".category-item-parent.hidden").hide();
    $(".more-btn").on('click', function (e) {
        e.preventDefault();
        $(".category-item-parent.hidden").toggle(500);
        var htmlAfter = "Hide Categories";
        var htmlBefore = "More Categories";

        $(this).html($(this).text() == htmlAfter ? htmlBefore : htmlAfter);
        $(this).toggleClass("minus");
    });

    /*Header Cart
    -----------------------------------*/
    var headerActionToggle = $('.ha-toggle');
    var headerActionDropdown = $('.ha-dropdown');
    // Toggle Header Cart
    headerActionToggle.on("click", function (e) {
        var $this = $(this);
        headerActionDropdown.slideUp();
        if ($this.siblings('.ha-dropdown').is(':hidden')) {
            $this.siblings('.ha-dropdown').slideDown();
        } else {
            $this.siblings('.ha-dropdown').slideUp();
        }
    });

    // Prevent closing Header Cart upon clicking inside the Header Cart
    $('.ha-dropdown').on('click', function (e) {
        e.stopPropagation();
    });

    // nice select active js
    $('select').niceSelect();

    // slick active
    $('#menu2').slicknav({
        label: "Categories",
        prependTo: '.categories-menu-bar',
        closedSymbol: '+',
        openedSymbol: '-'
    });

    // pricing filter
    $("#price-slider").slider({
        range: true,
        min: 0,
        max: 500,
        values: [0, 500],
        slide: function (event, ui) {
            $("#min-price").val('$' + ui.values[0]);
            $("#max-price").val('$' + ui.values[1]);
        }
    });
    $("#min-price").val('$' + $("#price-slider").slider("values", 0));
    $("#max-price").val('$' + $("#price-slider").slider("values", 1));

    // magnificPopup img view 
    $('.img-popup').magnificPopup({
        type: 'image',
        gallery: {
            enabled: true
        }
    });

    // magnificPopup video view
    $('.play-btn').magnificPopup({
        type: 'iframe'
    });


    // scroll to top
    $(window).on('scroll', function () {
        if ($(this).scrollTop() > 600) {
            $('.scroll-top').removeClass('not-visible');
        }
        else {
            $('.scroll-top').addClass('not-visible');
        }
    });
    $('.scroll-top').on('click', function (event) {
        $('html,body').animate({
            scrollTop: 0
        }, 1000);
    });

    // product view mode change js
    $('.product-view-mode a').on('click', function (e) {
        e.preventDefault();

        var shopProductWrap = $('.shop-product-wrap');
        var viewMode = $(this).data('target');

        $('.product-view-mode a').removeClass('active');
        $(this).addClass('active');
        shopProductWrap.removeClass('grid list column_3').addClass(viewMode);
    })

    // modal fix
    $('.modal').on('shown.bs.modal', function (e) {
        $('.pro-nav').resize();
    })


    // Checkout Page Accordion Behaviour
    $('#show_login').on('click', function () {
        $('#checkout_login').slideToggle(300);
    });

    $('#show_coupon').on('click', function () {
        $('#checkout_coupon').slideToggle(300);
    });

    $("#different_shipping").on("change", function () {
        $(".ship-box-info").slideToggle(300);
    });

    $("#create_account").on("change", function () {
        $(".new-account-info").slideToggle(300);
    });

    //Product Quantity 
    $('.product-qty').append('<span class="dec qtybtn"><i class="fa fa-minus"></i></span><span class="inc qtybtn"><i class="fa fa-plus"></i></span>');
    $('.qtybtn').on('click', function () {
        var $button = $(this);
        var oldValue = $button.parent().find('input').val();
        if ($button.hasClass('inc')) {
            var newVal = parseFloat(oldValue) + 1;
        } else {
            // Don't allow decrementing below zero
            if (oldValue > 0) {
                var newVal = parseFloat(oldValue) - 1;
            } else {
                newVal = 0;
            }
        }
        $button.parent().find('input').val(newVal);
    });

    // sticky sidebar
    $('.is-stickyy').stickySidebar({
        topSpacing: 100,
        bottomSpacing: -20
    });

    /*---- Countdown Activation ----*/
    $('[data-countdown]').each(function () {
        var $this = $(this), finalDate = $(this).data('countdown');
        $this.countdown(finalDate, function (event) {
            $this.html(event.strftime('<div class="single-countdown"><span class="single-countdown__time">%D</span><span class="single-countdown__text">Days</span></div><div class="single-countdown"><span class="single-countdown__time">%H</span><span class="single-countdown__text">Hours</span></div><div class="single-countdown"><span class="single-countdown__time">%M</span><span class="single-countdown__text">Min</span></div><div class="single-countdown"><span class="single-countdown__time">%S</span><span class="single-countdown__text">Sec</span></div>'));
        });
    });


    // Mailchimp for dynamic newsletter
    $('#mc-form').ajaxChimp({
        language: 'en',
        callback: mailChimpResponse,
        // ADD YOUR MAILCHIMP URL BELOW HERE!
        url: 'http://devitems.us11.list-manage.com/subscribe/post?u=6bbb9b6f5827bd842d9640c82&amp;id=05d85f18ef'
    });

    // mailchimp active js
    function mailChimpResponse(resp) {
        if (resp.result === 'success') {
            $('.mailchimp-success').html('' + resp.msg).fadeIn(900);
            $('.mailchimp-error').fadeOut(400);

        } else if (resp.result === 'error') {
            $('.mailchimp-error').html('' + resp.msg).fadeIn(900);
        }
    }

})(jQuery);	